<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3568 Sayƒ±lƒ± Kanun - Cevap Yazƒ±sƒ± Olu≈üturucu</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 { font-size: 28px; margin-bottom: 10px; }
        .header p { font-size: 14px; opacity: 0.9; }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #ddd;
        }
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 16px;
            font-weight: bold;
            color: #666;
            transition: all 0.3s;
        }
        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }
        .tab:hover {
            background: #e9ecef;
        }
        
        .tab-content {
            display: none;
            padding: 40px;
        }
        .tab-content.active {
            display: block;
        }
        
        .content { padding: 0; }
        .step { margin-bottom: 30px; }
        .step-title {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 16px;
        }
        .text-input {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            resize: vertical;
            transition: all 0.3s;
        }
        .text-input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
            margin-top: 10px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .btn-secondary { background: #28a745; }
        .btn-danger { background: #dc3545; }
        
        .preview {
            display: none;
            margin-top: 30px;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
            max-height: 600px;
            overflow-y: auto;
        }
        .preview.active { display: block; }
        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        .loading.active { display: block; }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        
        .prompt-display {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            line-height: 1.6;
        }
        
        .prompt-display h2 {
            color: #667eea;
            font-family: 'Segoe UI', sans-serif;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        #resultContent {
            font-family: 'Times New Roman', Times, serif;
            font-size: 9pt;
            line-height: 1.3;
            max-width: 17cm;
            margin: 0 auto;
        }
        #resultContent table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 7.5pt;
            table-layout: fixed;
        }
        #resultContent table, #resultContent th, #resultContent td {
            border: 1px solid #000;
        }
        #resultContent th {
            background-color: #f0f0f0;
            font-weight: bold;
            padding: 3px;
            word-wrap: break-word;
        }
        #resultContent td {
            padding: 3px;
            word-wrap: break-word;
        }
        #resultContent h1 {
            font-size: 11pt;
            text-align: center;
            margin: 20px 0;
        }
        #resultContent h2 {
            font-size: 9pt;
            font-weight: bold;
            margin-top: 15px;
        }
        #resultContent h3 {
            font-size: 9pt;
            font-weight: bold;
            margin-top: 10px;
        }
        #resultContent hr {
            margin: 15px 0;
            border: none;
            border-top: 1px solid #000;
        }
        .char-counter {
            text-align: right;
            font-size: 11px;
            color: #999;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìÑ 3568 Sayƒ±lƒ± Kanun - Cevap Yazƒ±sƒ± Olu≈üturucu</h1>
            <p>PROMPT Tabanlƒ± Otomatik Sistem</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('usage')">üìù Kullanƒ±m</button>
            <button class="tab" onclick="switchTab('prompt')">‚öôÔ∏è PROMPT</button>
        </div>

        <div class="content">
            <!-- KULLANIM SEKMES ƒ∞ -->
            <div id="tab-usage" class="tab-content active">
                <div id="alerts"></div>

                <div class="step">
                    <div class="step-title">
                        <span class="step-number">1</span>
                        Bilgi ƒ∞steme Dosyasƒ± (bilgi_isteme.docx)
                    </div>
                    <textarea 
                        class="text-input" 
                        id="text1" 
                        placeholder="Word'de dosyayƒ± a√ßƒ±n ‚Üí Cmd+A (T√ºm√ºn√º Se√ß) ‚Üí Cmd+C (Kopyala) ‚Üí Buraya Cmd+V (Yapƒ±≈ütƒ±r)"
                        oninput="checkAllInputs(); updateCounter(1)"></textarea>
                    <div class="char-counter" id="counter1">0 karakter</div>
                </div>

                <div class="step">
                    <div class="step-title">
                        <span class="step-number">2</span>
                        Firma Bilgileri Dosyasƒ± (firma_bilgileri.docx)
                    </div>
                    <textarea 
                        class="text-input" 
                        id="text2" 
                        placeholder="Word'de dosyayƒ± a√ßƒ±n ‚Üí Cmd+A ‚Üí Cmd+C ‚Üí Buraya Cmd+V"
                        oninput="checkAllInputs(); updateCounter(2)"
                        style="min-height: 200px;"></textarea>
                    <div class="char-counter" id="counter2">0 karakter</div>
                </div>

                <div class="step">
                    <div class="step-title">
                        <span class="step-number">3</span>
                        YMM Bilgileri Dosyasƒ± (ymm_bilgileri.docx)
                    </div>
                    <textarea 
                        class="text-input" 
                        id="text3" 
                        placeholder="Word'de dosyayƒ± a√ßƒ±n ‚Üí Cmd+A ‚Üí Cmd+C ‚Üí Buraya Cmd+V"
                        oninput="checkAllInputs(); updateCounter(3)"></textarea>
                    <div class="char-counter" id="counter3">0 karakter</div>
                </div>

                <div class="step">
                    <button class="btn" id="generateBtn" onclick="sendToClaudeAPI()" disabled>
                        ü§ñ CLAUDE AI ile Cevap Yazƒ±sƒ± Olu≈ütur
                    </button>
                    <button class="btn btn-danger" onclick="clearAll()">
                        üóëÔ∏è Temizle
                    </button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Claude AI cevap yazƒ±sƒ±nƒ± olu≈üturuyor (PROMPT'a g√∂re)...</p>
                </div>

                <div class="preview" id="preview">
                    <h3 style="margin-bottom: 20px; color: #667eea;">üìã √ñnizleme</h3>
                    <div id="resultContent"></div>
                    <div style="margin-top: 20px;">
                        <button class="btn" onclick="copyToWord()">üìã Word'e Kopyala</button>
                        <button class="btn btn-secondary" onclick="downloadHTML()">üíæ HTML ƒ∞ndir</button>
                    </div>
                </div>
            </div>

            <!-- PROMPT SEKMESƒ∞ -->
            <div id="tab-prompt" class="tab-content">
                <h2 style="color: #667eea; margin-bottom: 20px;">‚öôÔ∏è Kullanƒ±lan PROMPT</h2>
                <p style="margin-bottom: 20px; color: #666;">
                    Bu uygulama a≈üaƒüƒ±daki promptu kullanarak Claude AI'dan cevap yazƒ±sƒ± olu≈üturur:
                </p>
                <div class="prompt-display" id="promptDisplay"></div>
            </div>
        </div>

        <div class="footer">
            <p>¬© 2026 - Claude AI Tabanlƒ± 3568 Sayƒ±lƒ± Kanun Otomasyonu</p>
            <p style="margin-top: 5px; font-size: 12px;">T√ºm i≈ülemler tarayƒ±cƒ±nƒ±zda yapƒ±lƒ±r, verileriniz g√ºvende.</p>
        </div>
    </div>

    <script>
        // PROMPT ƒ∞√áERƒ∞ƒûƒ∞
        const FULL_PROMPT = `3568 Sayƒ±lƒ± Kanun uyarƒ±nca Bilgi Cevap Yazƒ±sƒ± olu≈ütur.

A≈üaƒüƒ±daki 3 dosya i√ßeriƒüi sana verildi:
1. bilgi_isteme.docx - Bilgi talep eden YMM'nin yazƒ±sƒ±
2. firma_bilgileri.docx - Bilgi verilecek firma hakkƒ±nda detaylƒ± bilgiler  
3. ymm_bilgileri.docx - Bilgi veren YMM'nin bilgileri

**G√ñREV ADIMLARI:**

**ADIM 1 - FATURA ANALƒ∞Zƒ∞:**
- bilgi_isteme.docx dosyasƒ±ndaki FATURA tablosunu incele
- Tarih, Fatura No, Matrah ve KDV bilgilerini not al
- Bu faturalarƒ±n hangi aylara ait olduƒüunu tespit et

**ADIM 2 - D√ñNEM BELƒ∞RLEME:**
- Her fatura i√ßin:
  - Faturanƒ±n d√ºzenlendiƒüi ay
  - Bir √∂nceki ay (sadece KDV beyanƒ± i√ßin)
- Bu d√∂nemleri firma_bilgileri.docx'teki KDV beyanlarƒ±yla e≈üle≈ütir

**ADIM 3 - ALT TEDARƒ∞K√áƒ∞ TABLOSU:**
- SADECE fatura aylarƒ± i√ßin firma_bilgileri.docx'ten
- Her d√∂nem i√ßin "En y√ºksek tutarlƒ± 10 alƒ±≈ü faturalarƒ±" tablosunu bul
- Bir √∂nceki ay EKLEME, sadece fatura aylarƒ±

**ADIM 4 - MUHTASAR BEYAN:**
- SADECE fatura aylarƒ± i√ßin firma_bilgileri.docx'ten
- "√áalƒ±≈ütƒ±rƒ±lan ƒ∞≈ü√ßi Sayƒ±sƒ±" bilgilerini al

**CEVAP YAZISI FORMATI:**

Tarih: [Bug√ºn√ºn tarihi], ISTANBUL
Sayƒ±: MU-[Sƒ∞Cƒ∞L NO]/[YIL] - [SERƒ∞ NO]
ƒ∞lgi: [bilgi_isteme.docx'teki tarih ve sayƒ±]
Konu: Bilgi Cevap Verme Yazƒ±sƒ±

---

SAYIN [Bilgi Talebinde Bulunan YMM Adƒ± Soyadƒ±]
Yeminli Mali M√º≈üavir
[Adres]

---

Gƒ∞Rƒ∞≈û PARAGR AFI (√áOK √ñNEMLƒ∞):
3568 Sayƒ±lƒ± Kanun ve baƒülƒ± mevzuat h√ºk√ºmleri √ßer√ßevesinde [YIL] yƒ±lƒ± Tam Tasdik i≈ülemi tarafƒ±mƒ±zdan yapƒ±lan [Bƒ∞LGƒ∞ VEREN YMM'Nƒ∞N M√úKELLEFƒ∞ TAM √úNVAN]'nin m√ºkellefiniz [Bƒ∞LGƒ∞ ƒ∞STEYEN YMM'Nƒ∞N M√úKELLEFƒ∞ TAM √úNVAN] ile ilgili olarak hakkƒ±nda bilgi talep ettiƒüiniz [KAR≈ûIT ƒ∞NCELEMEYE KONU M√úKELLEFƒ∞N TAM √úNVANI] adƒ±na d√ºzenlemi≈ü olduƒüu faturalar ile ilgili d√∂k√ºm, 3568 Sayƒ±lƒ± Kanun'a baƒülƒ± 27, 29 ve 45 No'lu Tebliƒü h√ºk√ºmleri √ßer√ßevesinde a≈üaƒüƒ±daki ≈üekilde bilgilerinize sunulmu≈ütur.

---

**A- Bƒ∞LGƒ∞ ƒ∞STEYEN YEMƒ∞NLƒ∞ MALƒ∞ M√ú≈ûAVƒ∞R VE M√úKELLEFƒ∞:**

1. Bilgi ƒ∞steyen YMM: (bilgi_isteme.docx'ten TABLO formatƒ±nda)
2. Bilgi ƒ∞steyen YMM'nin M√ºkellefi: (TABLO formatƒ±nda)
3. S√∂zle≈üme Bilgileri: (TABLO formatƒ±nda)

**B- TEYƒ∞T VEREN YEMƒ∞NLƒ∞ MALƒ∞ M√ú≈ûAVƒ∞R VE M√úKELLEFƒ∞N Bƒ∞LGƒ∞LERƒ∞:**

1. Bilgi Veren YMM: (ymm_bilgileri.docx'ten TABLO formatƒ±nda)
2. Bilgi Veren YMM'nin M√ºkellefi: (firma_bilgileri.docx'ten TABLO formatƒ±nda)
3. Tam Tasdik S√∂zle≈üme Bilgileri: (TABLO - her yƒ±l i√ßin ayrƒ±)
4. Yasal Defter Onay Bilgileri: (TABLO - her yƒ±l i√ßin)
5. Ortak Bilgileri: (TABLO - hisse √ßoƒüunluƒüuna sahip ortaklar)

6. Bƒ∞LGƒ∞ YAZISINA KONU BELGELER:
   - Fatura tablosu (Yevmiye/Fi≈ü No s√ºtunu ekle - bo≈ü bƒ±rak veya "[Muavin kaydƒ±ndan alƒ±nacak]")

7. KDV BEYAN Bƒ∞LGƒ∞LERƒ∞:
   - Fatura ayƒ± + bir √∂nceki ay i√ßin KDV beyan tablolarƒ±

8. Bƒ∞LGƒ∞ YAZISINA KONU MALLARIN TEDARƒ∞K EDƒ∞LDƒ∞ƒûƒ∞ ALT Fƒ∞RMALARA ƒ∞Lƒ∞≈ûKƒ∞N Bƒ∞LGƒ∞LER:
   - SADECE fatura aylarƒ± i√ßin
   - Her d√∂nem i√ßin "En y√ºksek tutarlƒ± 10 alƒ±≈ü faturalarƒ±" tablosu

9. ƒ∞MALAT√áI Fƒ∞RMA Bƒ∞LGƒ∞Sƒ∞:
   M√ºkellefimiz saƒülƒ±k hizmetleri sekt√∂r√ºnde faaliyet g√∂stermekte olup, imalat√ßƒ± firma stat√ºs√ºnde deƒüildir. Dolayƒ±sƒ±yla sanayi odasƒ± sicil kaydƒ± bulunmamaktadƒ±r.

10. √ñDEME ≈ûEKLƒ∞:
    Kar≈üƒ±t incelemeye konu faturalarƒ±n bedelleri BANKA TRANSFERI yoluyla √∂denmi≈ütir.

11. √áALI≈ûTIRILAN ƒ∞≈û√áƒ∞ SAYISI VE MUHTASAR BEYAN Bƒ∞LGƒ∞LERƒ∞:
    - SADECE fatura aylarƒ± i√ßin
    - Tablo formatƒ±nda

**SONU√á:**
3568 Sayƒ±lƒ± Yeminli Mali M√º≈üavirlik Kanunu ve ilgili tebliƒüler √ßer√ßevesinde tarafƒ±nƒ±za sunulan bilgiler, m√ºkellefimiz kayƒ±tlarƒ±na ve belgelerine dayanmaktadƒ±r. S√∂z konusu faturalarda yer alan mal veya hizmetlerin alƒ±≈üƒ± ve satƒ±≈üƒ± ger√ßeƒüi yansƒ±tmakta olup, KDV matrahƒ±na dahil edilmi≈ü ve yasal defterlere kaydedilmi≈ütir.

Bilgilerinize saygƒ±larƒ±mla arz ederim.

[YMM Adƒ± Soyadƒ±]
Yeminli Mali M√º≈üavir
M√ºh√ºr No: [M√ºh√ºr No]
Sicil No: [Sicil No]

**FORMAT KURALLARI:**
- Font: 9 punto (tablolar 7.5 punto)
- Sayfa geni≈üliƒüi: 17cm (A4 uyumlu)
- Tablolarda firma isimlerini kƒ±salt (SANAYƒ∞ ‚Üí SAN., Tƒ∞CARET ‚Üí Tƒ∞C.)
- Gereksiz ondalƒ±klarƒ± kaldƒ±r`;

        // Prompt'u g√∂ster
        document.getElementById('promptDisplay').textContent = FULL_PROMPT;

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');
        }

        function updateCounter(num) {
            const text = document.getElementById('text' + num).value;
            document.getElementById('counter' + num).textContent = text.length.toLocaleString() + ' karakter';
        }

        function checkAllInputs() {
            const text1 = document.getElementById('text1').value.trim();
            const text2 = document.getElementById('text2').value.trim();
            const text3 = document.getElementById('text3').value.trim();
            
            const allFilled = text1.length > 100 && text2.length > 500 && text3.length > 50;
            document.getElementById('generateBtn').disabled = !allFilled;
        }

        function clearAll() {
            if (confirm('T√ºm girilen veriler silinecek. Emin misiniz?')) {
                ['text1', 'text2', 'text3'].forEach(id => document.getElementById(id).value = '');
                [1,2,3].forEach(updateCounter);
                checkAllInputs();
                document.getElementById('preview').classList.remove('active');
            }
        }

        function showAlert(message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert';
            alertDiv.textContent = message;
            document.getElementById('alerts').appendChild(alertDiv);
            setTimeout(() => alertDiv.remove(), 5000);
        }

        async function sendToClaudeAPI() {
            document.getElementById('loading').classList.add('active');
            document.getElementById('preview').classList.remove('active');

            try {
                const bilgiIsteme = document.getElementById('text1').value;
                const firmaBilgi = document.getElementById('text2').value;
                const ymmBilgi = document.getElementById('text3').value;

                const fullPrompt = `${FULL_PROMPT}

---
**DOSYA ƒ∞√áERƒ∞KLERƒ∞:**

**1. bilgi_isteme.docx:**
${bilgiIsteme}

**2. firma_bilgileri.docx:**
${firmaBilgi}

**3. ymm_bilgileri.docx:**
${ymmBilgi}

---

Yukarƒ±daki PROMPT'a g√∂re TAM ve DETAYLI cevap yazƒ±sƒ±nƒ± HTML formatƒ±nda olu≈ütur. T√ºm b√∂l√ºmleri eksiksiz dahil et.`;

                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        model: "claude-sonnet-4-20250514",
                        max_tokens: 16000,
                        messages: [
                            { role: "user", content: fullPrompt }
                        ],
                    })
                });

                const data = await response.json();
                
                if (data.content && data.content[0] && data.content[0].text) {
                    let htmlContent = data.content[0].text;
                    
                    // HTML tag'lerini temizle
                    htmlContent = htmlContent.replace(/```html/g, '').replace(/```/g, '');
                    
                    document.getElementById('resultContent').innerHTML = htmlContent;
                    document.getElementById('loading').classList.remove('active');
                    document.getElementById('preview').classList.add('active');
                    showAlert('Claude AI cevap yazƒ±sƒ±nƒ± olu≈üturdu! üéâ');
                    document.getElementById('preview').scrollIntoView({ behavior: 'smooth' });
                } else {
                    throw new Error('Claude API yanƒ±t vermedi');
                }
                
            } catch (error) {
                document.getElementById('loading').classList.remove('active');
                alert('Hata: ' + error.message + '\n\nNot: Claude API bu sayfada √ßalƒ±≈ümayabilir. L√ºtfen promptu kopyalayƒ±p doƒürudan Claude.ai\'da kullanƒ±n.');
            }
        }

        function copyToWord() {
            const content = document.getElementById('resultContent');
            const range = document.createRange();
            range.selectNode(content);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            showAlert('ƒ∞√ßerik kopyalandƒ±! Word\'e yapƒ±≈ütƒ±rabilirsiniz (Cmd+V)');
        }

        function downloadHTML() {
            const content = document.getElementById('resultContent').innerHTML;
            const fullHTML = `<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Cevap Yazƒ±sƒ±</title>
    <style>
        body { font-family: 'Times New Roman', Times, serif; font-size: 9pt; max-width: 17cm; margin: 0 auto; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 7.5pt; table-layout: fixed; }
        table, th, td { border: 1px solid #000; }
        th { background-color: #f0f0f0; padding: 3px; word-wrap: break-word; }
        td { padding: 3px; word-wrap: break-word; }
        h1 { font-size: 11pt; text-align: center; }
        h2, h3 { font-size: 9pt; }
        hr { margin: 15px 0; border: none; border-top: 1px solid #000; }
    </style>
</head>
<body>${content}</body>
</html>`;
            
            const blob = new Blob([fullHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'cevap_yazisi_' + new Date().toISOString().slice(0,10) + '.html';
            a.click();
            URL.revokeObjectURL(url);
            showAlert('HTML dosyasƒ± indirildi! üì•');
        }
    </script>
</body>
</html>
